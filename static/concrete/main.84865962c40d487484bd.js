(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,u,t){e.exports=t("RkpP")},OzZv:function(e,u,t){},RkpP:function(e,u,t){"use strict";t.r(u);var r={};t.r(r),t.d(r,"SyntaxError",(function(){return k})),t.d(r,"parse",(function(){return _})),t.d(r,"default",(function(){return b}));var a={};t.r(a),t.d(a,"typeGuard",(function(){return j})),t.d(a,"typeName",(function(){return L})),t.d(a,"service",(function(){return V}));var n={};t.r(n),t.d(n,"typeGuard",(function(){return Q})),t.d(n,"typeName",(function(){return M})),t.d(n,"service",(function(){return z}));var o={};t.r(o),t.d(o,"typeGuard",(function(){return q})),t.d(o,"typeName",(function(){return W})),t.d(o,"service",(function(){return J}));var c={};t.r(c),t.d(c,"typeGuard",(function(){return Y})),t.d(c,"typeName",(function(){return Z})),t.d(c,"service",(function(){return K}));var s={};t.r(s),t.d(s,"typeGuard",(function(){return ee})),t.d(s,"typeName",(function(){return ue})),t.d(s,"service",(function(){return re}));var i={};t.r(i),t.d(i,"typeGuard",(function(){return ae})),t.d(i,"typeName",(function(){return ne})),t.d(i,"service",(function(){return ce}));var l={};t.r(l),t.d(l,"typeGuard",(function(){return se})),t.d(l,"typeName",(function(){return ie})),t.d(l,"service",(function(){return Ae}));var A={};t.r(A),t.d(A,"typeGuard",(function(){return pe})),t.d(A,"typeName",(function(){return de})),t.d(A,"service",(function(){return Ce}));var p={};t.r(p),t.d(p,"typeGuard",(function(){return Fe})),t.d(p,"typeName",(function(){return fe})),t.d(p,"service",(function(){return De}));var d={};t.r(d),t.d(d,"typeGuard",(function(){return me})),t.d(d,"typeName",(function(){return he})),t.d(d,"service",(function(){return ve}));var E={};t.r(E),t.d(E,"typeGuard",(function(){return ge})),t.d(E,"typeName",(function(){return Te})),t.d(E,"service",(function(){return _e}));var C={};t.r(C),t.d(C,"typeGuard",(function(){return be})),t.d(C,"typeName",(function(){return xe})),t.d(C,"service",(function(){return Se}));var F={};t.r(F),t.d(F,"typeGuard",(function(){return Ne})),t.d(F,"typeName",(function(){return Ie})),t.d(F,"service",(function(){return Pe}));var f={};t.r(f),t.d(f,"typeGuard",(function(){return Ue})),t.d(f,"typeName",(function(){return Oe})),t.d(f,"service",(function(){return Le}));var B={};t.r(B),t.d(B,"typeGuard",(function(){return He})),t.d(B,"typeName",(function(){return Ve})),t.d(B,"service",(function(){return Me}));var D=t("LLK0"),m=(t("OzZv"),t("4ZNH")),h=t("G15u"),y=t("iFMf"),v=t("xfAZ"),g=t("/XRO"),T=t("o6+l");function k(e,u,t,r){this.message=e,this.expected=u,this.found=t,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,k)}function _(e,u){u=void 0!==u?u:{};var t,r={},a={Tape:Ie},n=Ie,o="]",c="{",s="}",i="&&",l="||",A=">=",p="<=",d="==",E="-",C=".",F="/*",f="*/",B="#",D="\\",m='"',h="'",y="x",v=/^[+\-%*\/><|&?]/,g=/^[0-9]/,T=/^[\n\r\u2028\u2029]/,_=/^[0-9a-f]/i,b=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0561-\u0587\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,x=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uAA70\uAADD\uAAF3-\uAAF4\uFF70\uFF9E-\uFF9F]/,R=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0977\u0979-\u097F\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58-\u0C59\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,S=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,N=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA\uFF21-\uFF3A]/,I=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u19B0-\u19C0\u19C8-\u19C9\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BAC-\u1BAD\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,w=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u08FE\u0900-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1DC0-\u1DE6\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE26]/,P=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,U=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,O=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,j=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,L=ve(",",!1),H=ve(":",!1),V=ve("(",!1),Q=ve(")",!1),M=ve("[",!1),G=ve("]",!1),z=ve("{",!1),q=ve("}",!1),W=ge(["+","-","%","*","/",">","<","|","&","?"],!1,!1),$=ve("&&",!1),J=ve("||",!1),Y=ve(">=",!1),Z=ve("<=",!1),X=ve("==",!1),K=ve("_",!1),ee=ve("-",!1),ue=ge([["0","9"]],!1,!1),te=ve(".",!1),re=ve("@",!1),ae=Te("whitespace"),ne=Te("end of line"),oe=Te("comment"),ce=ve("!",!1),se=ve("#",!1),ie=ve("/",!1),le=Te("identifier"),Ae=Te("string"),pe=function(e){return{type:"operator",value:e}},de=function(e,u){return{type:"callIdentifier",value:e}},Ee=function(e){return e.join("")},Ce=function(){return ye()},Fe=function(e){return String.fromCharCode(parseInt(e,16))},fe=0,Be=0,De=[{line:1,column:1}],me=[],he=0;if("startRule"in u){if(!(u.startRule in a))throw new Error("Can't start parsing from rule \""+u.startRule+'".');n=a[u.startRule]}function ye(){return e.substring(Be,fe)}function ve(e,u){return{type:"literal",text:e,ignoreCase:u}}function ge(e,u,t){return{type:"class",parts:e,inverted:u,ignoreCase:t}}function Te(e){return{type:"other",description:e}}function ke(u){var t,r=De[u];if(r)return r;for(t=u-1;!De[t];)t--;for(r={line:(r=De[t]).line,column:r.column};t<u;)10===e.charCodeAt(t)?(r.line++,r.column=1):r.column++,t++;return De[u]=r,r}var _e="string"==typeof u.filename&&u.filename.length>0;function be(e,t){var r={};_e&&(r.filename=u.filename);var a=ke(e);r.start={offset:e,line:a.line,column:a.column};var n=ke(t);return r.end={offset:t,line:n.line,column:n.column},r}function xe(){me.push({pos:fe,variants:[]})}function Re(e){var u=me[me.length-1];fe<u.pos||(fe>u.pos&&(u.pos=fe,u.variants=[]),u.variants.push(e))}function Se(e){var u=me.pop(),t=me[me.length-1],r=u.variants;t.pos===u.pos&&(e&&(r=r.map((function(e){return"not"===e.type?e.expected:{type:"not",expected:e}}))),Array.prototype.push.apply(t.variants,r))}function Ne(e,u,t){return new k(k.buildMessage(e,u,t),e,u,t)}function Ie(){var u,t,a,n,o,c,s,i=function(e){0===he&&Re(e)};for(u=fe,i(L),44===e.charCodeAt(fe)?(t=",",fe++):t=r,t===r&&(t=null),Ke(),a=[],n=fe,(o=we())!==r?(c=Ke(),i(L),44===e.charCodeAt(fe)?(s=",",fe++):s=r,s===r&&(s=null),n=o=[o,c,s,Ke()]):(fe=n,n=r);n!==r;)a.push(n),n=fe,(o=we())!==r?(c=Ke(),i(L),44===e.charCodeAt(fe)?(s=",",fe++):s=r,s===r&&(s=null),n=o=[o,c,s,Ke()]):(fe=n,n=r);return n=Ke(),Be=u,u=function(e,u){var t,r={},a=new Array(u.length);for(e&&(r[0]=!0),t=0;t<u.length;t++)a[t]=u[t][0],u[t][2]&&(r[t+1]=!0);return{type:"tape",original:ye(),commas:r,blocks:a}}(t,a)}function we(){var u,t,a,n,F,f;return u=fe,t=fe,(a=function(){var e,u;e=fe,(u=Qe())!==r&&(Be=e,u=u);return e=u}())!==r?(!function(e){0===he&&Re(e)}(H),58===e.charCodeAt(fe)?(n=":",fe++):n=r,n!==r?t=a=[a,n,Ke()]:(fe=t,t=r)):(fe=t,t=r),t===r&&(t=null),(a=function(){var u;(u=function(){var u,t,a,n=function(e){0===he&&Re(e)};u=fe,(t=Ve())!==r?(n(ce),33===e.charCodeAt(fe)?(a="!",fe++):a=r,a!==r?(Be=u,u=de(t)):(fe=u,u=r)):(fe=u,u=r);return u}())===r&&(u=function(){var u,t,a,n,o=function(e){0===he&&Re(e)};u=fe,o(se),35===e.charCodeAt(fe)?(t=B,fe++):t=r;t!==r&&(a=Ve())!==r?(o(se),35===e.charCodeAt(fe)?(n=B,fe++):n=r,n!==r?(Be=u,u={type:"coupleIdentifier",value:a}):(fe=u,u=r)):(fe=u,u=r);return u}())===r&&(u=function(){var u;(u=function(){var u;(u=function(){var u,t,a,n,o,c,s,i=function(e){0===he&&Re(e)};u=fe,i(ee),45===e.charCodeAt(fe)?(t=E,fe++):t=r;t===r&&(t=null);a=fe,n=[],i(ue),g.test(e.charAt(fe))?(o=e.charAt(fe),fe++):o=r;for(;o!==r;)n.push(o),i(ue),g.test(e.charAt(fe))?(o=e.charAt(fe),fe++):o=r;i(te),46===e.charCodeAt(fe)?(o=C,fe++):o=r;if(o!==r){if(c=[],i(ue),g.test(e.charAt(fe))?(s=e.charAt(fe),fe++):s=r,s!==r)for(;s!==r;)c.push(s),i(ue),g.test(e.charAt(fe))?(s=e.charAt(fe),fe++):s=r;else c=r;c!==r?a=n=[n,o,c]:(fe=a,a=r)}else fe=a,a=r;a!==r?(Be=u,l=t,A=a,u={type:"number",value:parseFloat(A[0].join("")+A[1]+A[2].join(""),10)*(eu(l,0)?-1:1)}):(fe=u,u=r);var l,A;return u}())===r&&(u=function(){var u,t,a,n,o=function(e){0===he&&Re(e)};u=fe,o(ee),45===e.charCodeAt(fe)?(t=E,fe++):t=r;t===r&&(t=null);a=[],o(ue),g.test(e.charAt(fe))?(n=e.charAt(fe),fe++):n=r;if(n!==r)for(;n!==r;)a.push(n),o(ue),g.test(e.charAt(fe))?(n=e.charAt(fe),fe++):n=r;else a=r;a!==r?(Be=u,c=t,u={type:"number",value:parseInt(a.join(""),10)*(eu(c,0)?-1:1)}):(fe=u,u=r);var c;return u}());return u}())===r&&(u=function(){var u,t;u=fe,(t=function(){var u,t,a,n;(function(e){if(he===0)Re(e)})(Ae),he++,u=fe,34===e.charCodeAt(fe)?(t=m,fe++):t=r;if(t!==r){for(a=[],n=ze();n!==r;)a.push(n),n=ze();34===e.charCodeAt(fe)?(n=m,fe++):n=r,n!==r?(Be=u,u=Ee(a)):(fe=u,u=r)}else fe=u,u=r;if(u===r)if(u=fe,39===e.charCodeAt(fe)?(t=h,fe++):t=r,t!==r){for(a=[],n=qe();n!==r;)a.push(n),n=qe();39===e.charCodeAt(fe)?(n=h,fe++):n=r,n!==r?(Be=u,u=Ee(a)):(fe=u,u=r)}else fe=u,u=r;return he--,u}())!==r&&(Be=u,t={type:"string",value:t});return u=t}())===r&&(u=function(){var u,t,a;u=fe,function(e){if(he===0)Re(e)}(re),64===e.charCodeAt(fe)?(t="@",fe++):t=r;t!==r&&(a=Ve())!==r?(Be=u,u={type:"address",value:a}):(fe=u,u=r);return u}())===r&&(u=function(){var e,u;e=fe,(u=Ve())!==r&&(Be=e,u={type:"valueReference",value:u});return e=u}());return u}())===r&&(u=function(){var u,t,a,n,c,s,i,l=function(e){0===he&&Re(e)};u=fe,t=fe,l(V),40===e.charCodeAt(fe)?(a="(",fe++):a=r;a!==r?(n=Ke(),(c=Ie())!==r?(s=Ke(),l(Q),41===e.charCodeAt(fe)?(i=")",fe++):i=r,i!==r?t=a=[a,n,c,s,i,Ke()]:(fe=t,t=r)):(fe=t,t=r)):(fe=t,t=r);t===r&&(t=null);l(M),91===e.charCodeAt(fe)?(a="[",fe++):a=r;a!==r&&(n=Ie())!==r?(l(G),93===e.charCodeAt(fe)?(c=o,fe++):c=r,c!==r?(Be=u,u=function(e,u){return{type:"fold",tape:u,parameters:eu(e,2)}}(t,n)):(fe=u,u=r)):(fe=u,u=r);return u}())===r&&(u=function(){var u;(u=Ve())===r&&(u=function(){var u,t;u=fe,function(e){if(he===0)Re(e)}($),e.substr(fe,2)===i?(t=i,fe+=2):t=r;t!==r&&(Be=u,t=pe(t));return u=t}())===r&&(u=function(){var u,t;u=fe,function(e){if(he===0)Re(e)}(J),e.substr(fe,2)===l?(t=l,fe+=2):t=r;t!==r&&(Be=u,t=pe(t));return u=t}())===r&&(u=function(){var u,t;u=fe,function(e){if(he===0)Re(e)}(Z),e.substr(fe,2)===p?(t=p,fe+=2):t=r;t!==r&&(Be=u,t=pe(t));return u=t}())===r&&(u=function(){var u,t;u=fe,function(e){if(he===0)Re(e)}(Y),e.substr(fe,2)===A?(t=A,fe+=2):t=r;t!==r&&(Be=u,t=pe(t));return u=t}())===r&&(u=function(){var u,t;u=fe,function(e){if(he===0)Re(e)}(W),v.test(e.charAt(fe))?(t=e.charAt(fe),fe++):t=r;t!==r&&(Be=u,t=pe(t));return u=t}())===r&&(u=function(){var u,t;u=fe,function(e){if(he===0)Re(e)}(X),e.substr(fe,2)===d?(t=d,fe+=2):t=r;t!==r&&(Be=u,t=pe(t));return u=t}());return u}())===r&&(u=function(){var u,t;u=fe,function(e){if(he===0)Re(e)}(K),95===e.charCodeAt(fe)?(t="_",fe++):t=r;t!==r&&(Be=u,t={type:"blank",value:"blank"});return u=t}())===r&&(u=function(){var u,t,a,n,o=function(e){0===he&&Re(e)};u=fe,o(z),123===e.charCodeAt(fe)?(t=c,fe++):t=r;t!==r&&(a=Ie())!==r?(o(q),125===e.charCodeAt(fe)?(n=s,fe++):n=r,n!==r?(Be=u,u=function(e){return{type:"inlineFold",tape:e}}(a)):(fe=u,u=r)):(fe=u,u=r);return u}());return u}())!==r?(Be=u,F=t,f=a,u={type:"block",original:ye(),name:eu(F,0),code:f}):(fe=u,u=r),u}function Pe(){var u;return e.length>fe?(u=e.charAt(fe),fe++):u=r,u}function Ue(){var u;return function(e){0===he&&Re(e)}(ae),he++,9===e.charCodeAt(fe)?(u="\t",fe++):u=r,u===r&&(11===e.charCodeAt(fe)?(u="\v",fe++):u=r,u===r&&(12===e.charCodeAt(fe)?(u="\f",fe++):u=r,u===r&&(32===e.charCodeAt(fe)?(u=" ",fe++):u=r,u===r&&(160===e.charCodeAt(fe)?(u=" ",fe++):u=r,u===r&&(65279===e.charCodeAt(fe)?(u="\ufeff",fe++):u=r,u===r&&(u=function(){var u;j.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())))))),he--,u}function Oe(){var u;return T.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r,u}function je(){var u;return function(e){0===he&&Re(e)}(ne),he++,10===e.charCodeAt(fe)?(u="\n",fe++):u=r,u===r&&("\r\n"===e.substr(fe,2)?(u="\r\n",fe+=2):u=r,u===r&&(13===e.charCodeAt(fe)?(u="\r",fe++):u=r,u===r&&(8232===e.charCodeAt(fe)?(u="\u2028",fe++):u=r,u===r&&(8233===e.charCodeAt(fe)?(u="\u2029",fe++):u=r)))),he--,u}function Le(){var u;return function(e){0===he&&Re(e)}(oe),he++,(u=function(){var u,t,a,n,o,c;u=fe,e.substr(fe,2)===F?(t=F,fe+=2):t=r;if(t!==r){for(a=[],n=fe,o=fe,xe(),e.substr(fe,2)===f?(c=f,fe+=2):c=r,Se(!0),c===r?o=void 0:(fe=o,o=r),o!==r&&(c=Pe())!==r?n=o=[o,c]:(fe=n,n=r);n!==r;)a.push(n),n=fe,o=fe,xe(),e.substr(fe,2)===f?(c=f,fe+=2):c=r,Se(!0),c===r?o=void 0:(fe=o,o=r),o!==r&&(c=Pe())!==r?n=o=[o,c]:(fe=n,n=r);e.substr(fe,2)===f?(n=f,fe+=2):n=r,n!==r?u=t=[t,a,n]:(fe=u,u=r)}else fe=u,u=r;return u}())===r&&(u=He()),he--,u}function He(){var u,t,a,n,o,c;if(u=fe,"//"===e.substr(fe,2)?(t="//",fe+=2):t=r,t!==r){for(a=[],n=fe,o=fe,xe(),c=Oe(),Se(!0),c===r?o=void 0:(fe=o,o=r),o!==r&&(c=Pe())!==r?n=o=[o,c]:(fe=n,n=r);n!==r;)a.push(n),n=fe,o=fe,xe(),c=Oe(),Se(!0),c===r?o=void 0:(fe=o,o=r),o!==r&&(c=Pe())!==r?n=o=[o,c]:(fe=n,n=r);u=t=[t,a]}else fe=u,u=r;return u}function Ve(){var u,t,a,n,o,c,s=function(e){0===he&&Re(e)};return u=fe,(t=Qe())!==r?(a=fe,s(te),46===e.charCodeAt(fe)?(n=C,fe++):n=r,n===r&&(s(ie),47===e.charCodeAt(fe)?(n="/",fe++):n=r),n!==r&&(o=Ve())!==r?a=n=[n,o]:(fe=a,a=r),a===r&&(a=null),Be=u,u={type:"identifierPath",value:t,subPath:eu(c=a,1),separator:eu(c,0)}):(fe=u,u=r),u}function Qe(){var e,u,t,a;if(function(e){0===he&&Re(e)}(le),he++,e=fe,(u=Me())!==r){for(t=[],a=Ge();a!==r;)t.push(a),a=Ge();Be=e,e=u+t.join("")}else fe=e,e=r;return he--,e}function Me(){var u,t,a;return(u=function(){var u;(u=function(){var u;N.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(u=function(){var u;b.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(u=function(){var u;S.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(u=function(){var u;x.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(u=function(){var u;R.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(u=function(){var u;U.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}());return u}())===r&&(36===e.charCodeAt(fe)?(u="$",fe++):u=r,u===r&&(u=fe,92===e.charCodeAt(fe)?(t=D,fe++):t=r,t!==r&&(a=Ye())!==r?(Be=u,u=a):(fe=u,u=r))),u}function Ge(){var u;return(u=Me())===r&&(45===e.charCodeAt(fe)?(u=E,fe++):u=r,u===r&&(u=function(){var u;(u=function(){var u;w.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(u=function(){var u;I.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}());return u}())===r&&(u=function(){var u;P.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(u=function(){var u;O.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r;return u}())===r&&(8204===e.charCodeAt(fe)?(u="‌",fe++):u=r,u===r&&(8205===e.charCodeAt(fe)?(u="‍",fe++):u=r))),u}function ze(){var u,t,a;return u=fe,t=fe,xe(),34===e.charCodeAt(fe)?(a=m,fe++):a=r,a===r&&(92===e.charCodeAt(fe)?(a=D,fe++):a=r,a===r&&(a=Oe())),Se(!0),a===r?t=void 0:(fe=t,t=r),t!==r&&(a=Pe())!==r?(Be=u,u=Ce()):(fe=u,u=r),u===r&&(u=fe,92===e.charCodeAt(fe)?(t=D,fe++):t=r,t!==r&&(a=$e())!==r?(Be=u,u=a):(fe=u,u=r),u===r&&(u=We())),u}function qe(){var u,t,a;return u=fe,t=fe,xe(),39===e.charCodeAt(fe)?(a=h,fe++):a=r,a===r&&(92===e.charCodeAt(fe)?(a=D,fe++):a=r,a===r&&(a=Oe())),Se(!0),a===r?t=void 0:(fe=t,t=r),t!==r&&(a=Pe())!==r?(Be=u,u=Ce()):(fe=u,u=r),u===r&&(u=fe,92===e.charCodeAt(fe)?(t=D,fe++):t=r,t!==r&&(a=$e())!==r?(Be=u,u=a):(fe=u,u=r),u===r&&(u=We())),u}function We(){var u,t;return u=fe,92===e.charCodeAt(fe)?(t=D,fe++):t=r,t!==r&&je()!==r?(Be=u,u=""):(fe=u,u=r),u}function $e(){var u,t,a,n;return(u=function(){var u;(u=Je())===r&&(u=function(){var u,t,a;u=fe,t=fe,xe(),(a=function(){var u;(u=Je())===r&&(u=Ze())===r&&(120===e.charCodeAt(fe)?(u="x",fe++):u=r,u===r&&(117===e.charCodeAt(fe)?(u="u",fe++):u=r));return u}())===r&&(a=Oe());Se(!0),a===r?t=void 0:(fe=t,t=r);t!==r&&(a=Pe())!==r?(Be=u,u=Ce()):(fe=u,u=r);return u}());return u}())===r&&(u=fe,48===e.charCodeAt(fe)?(t="0",fe++):t=r,t!==r?(a=fe,xe(),n=Ze(),Se(!0),n===r?a=void 0:(fe=a,a=r),a!==r?(Be=u,u="\0"):(fe=u,u=r)):(fe=u,u=r),u===r&&(u=function(){var u,t,a,n,o,c;u=fe,120===e.charCodeAt(fe)?(t=y,fe++):t=r;t!==r?(a=fe,n=fe,(o=Xe())!==r&&(c=Xe())!==r?n=o=[o,c]:(fe=n,n=r),(a=n!==r?e.substring(a,fe):n)!==r?(Be=u,u=Fe(a)):(fe=u,u=r)):(fe=u,u=r);return u}())===r&&(u=Ye())),u}function Je(){var u,t;return 39===e.charCodeAt(fe)?(u=h,fe++):u=r,u===r&&(34===e.charCodeAt(fe)?(u=m,fe++):u=r,u===r&&(92===e.charCodeAt(fe)?(u=D,fe++):u=r,u===r&&(u=fe,98===e.charCodeAt(fe)?(t="b",fe++):t=r,t!==r&&(Be=u,t="\b"),(u=t)===r&&(u=fe,102===e.charCodeAt(fe)?(t="f",fe++):t=r,t!==r&&(Be=u,t="\f"),(u=t)===r&&(u=fe,110===e.charCodeAt(fe)?(t="n",fe++):t=r,t!==r&&(Be=u,t="\n"),(u=t)===r&&(u=fe,114===e.charCodeAt(fe)?(t="r",fe++):t=r,t!==r&&(Be=u,t="\r"),(u=t)===r&&(u=fe,116===e.charCodeAt(fe)?(t="t",fe++):t=r,t!==r&&(Be=u,t="\t"),(u=t)===r&&(u=fe,118===e.charCodeAt(fe)?(t="v",fe++):t=r,t!==r&&(Be=u,t="\v"),u=t)))))))),u}function Ye(){var u,t,a,n,o,c,s,i;return u=fe,117===e.charCodeAt(fe)?(t="u",fe++):t=r,t!==r?(a=fe,n=fe,(o=Xe())!==r&&(c=Xe())!==r&&(s=Xe())!==r&&(i=Xe())!==r?n=o=[o,c,s,i]:(fe=n,n=r),(a=n!==r?e.substring(a,fe):n)!==r?(Be=u,u=Fe(a)):(fe=u,u=r)):(fe=u,u=r),u}function Ze(){var u;return g.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r,u}function Xe(){var u;return _.test(e.charAt(fe))?(u=e.charAt(fe),fe++):u=r,u}function Ke(){var e,u;for(e=[],(u=Ue())===r&&(u=je())===r&&(u=Le());u!==r;)e.push(u),(u=Ue())===r&&(u=je())===r&&(u=Le());return e}function eu(e,u){return e?e[u]:null}if(xe(),(t=n())!==r&&fe===e.length)return t;throw t!==r&&fe<e.length&&Re({type:"end"}),function(){var u=me[0],t=u.pos;return Ne(u.variants,t<e.length?e.charAt(t):null,t<e.length?be(t,t+1):be(t,t))}()}!function(e,u){function t(){this.constructor=e}t.prototype=u.prototype,e.prototype=new t}(k,Error),k.buildMessage=function(e,u,t){var r={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var u=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+u+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description},not:function(e){return"not "+c(e.expected)}};function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function c(e){return r[e.type](e)}return"Expected "+function(e){var u,t,r=e.map(c);if(r.sort(),r.length>0){for(u=1,t=1;u<r.length;u++)r[u-1]!==r[u]&&(r[t]=r[u],t++);r.length=t}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(u)+" found."};var b={SyntaxError:k,parse:_};const{SyntaxError:x}=r;function R(e){return"string"!=typeof e&&(e=e.toString()),_(e).blocks[0]}const S=w,N=function(e){let u="";switch(e.code.type){case"string":u+=""+e.code.value;break;default:u+=w({...e,name:null})}return u};function I(e){const u=[];e.commas[0]&&u.push(",");for(let t=0;t<e.blocks.length;t++){let r=w(e.blocks[t]);e.commas[t+1]&&(r+=","),u.push(r)}return u.join(" ")}function w(e){let u="";switch(e.name&&(u+=e.name+": "),e.code.type){case"operator":case"number":u+=e.code.value;break;case"string":u+=`"${e.code.value}"`;break;case"valueReference":u+=""+P(e.code.value);break;case"address":u+="@"+P(e.code.value);break;case"callIdentifier":u+=P(e.code.value)+"!";break;case"fold":e.code.parameters&&(u+=`( ${I(e.code.parameters)} )`),u+=`[ ${I(e.code.tape)} ]`;break;case"blank":u+="_";break;default:throw new Error("Unable to determine type of block "+e.code.type)}return u}function P(e){let u=""+e.value;return e.subPath&&(u+=`${e.separator||"."}${P(e.subPath)}`),u}const U=function(e,u){const{stack:t,closedBlocksByIdentifierByActivationId:r}=e;let a,n;if("closed"==u.type)return r[u.idActivation][u.identifier];if("stack"!==u.type)throw new Error("Unknown resolution type "+u.type);return a=t[u.indexFrame],n=a.references[u.identifier],"param"==n.type?a.actualParameters[n.index]:a.tape.blocks[n.index]},O=function(e,u,t){let r,a,{stack:n,closedBlocksByIdentifierByActivationId:o}=e;if(t={...t,idActual:e.nextIdActualBlock},"closed"==u.type)return{...e,closedBlocksByIdentifierByActivationId:{...o,[u.idActivation]:{...o[u.idActivation],[u.identifier]:t}},nextIdActualBlock:nextIdActualBlock+1};if("stack"!==u.type)throw new Error("Unknown resolution type "+u.type);return r=n[u.indexFrame],a=r.references[u.identifier],r="param"==a.type?{...r,tape:{...r.tape,actualParameters:[...r.tape.actualParameters.slice(0,a.index),t,...r.tape.actualParameters.slice(a.index+1)]}}:{...r,tape:{...r.tape,blocks:[...r.tape.blocks.slice(0,a.index),t,...r.tape.blocks.slice(a.index+1)]}},n=[...n.slice(0,u.indexFrame),r,...n.slice(u.indexFrame+1)],{...e,nextIdActualBlock:e.nextIdActualBlock+1,stack:n}},j=e=>"+"==e.code.value,L="addition",H={actions:{exec:g.l(({stack:e},u)=>{const[t,...r]=e;let a;if(0==t.arguments.length||1==t.arguments.length&&"blank"==t.arguments[0].code.type)a=R("0");else switch(a=t.arguments.map(e=>{if("number"!==e.code.type&&"string"!==e.code.type)throw new Error("The '+' operator only operates on strings, integers and floats");return e.code.value}).reduce((e,u)=>e+u),typeof a){case"string":a=R('"'+a+'"');break;case"number":if(isNaN(a))throw new Error("The '+' operator only operates on strings, integers and floats");a=R(a.toString());break;default:throw new Error("The '+' operator can only operate on strings and numbers")}return{type:"PLACE_RESULT",payload:a}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),advanceHead:g.l("ADVANCE_HEAD")}},V=T.a({strict:!0,id:"addition",initial:"execute",states:{execute:{on:{STEP_QUANTA:{target:"done",actions:["exec","advanceHead","clearArguments"]}}},done:{type:"final"}}},H),Q=e=>"*"==e.code.value,M="multiplication",G={actions:{exec:g.l(({stack:e},u)=>{const[t,...r]=e;let a;if(0==t.arguments.length||1==t.arguments.length&&"blank"==t.arguments[0].code.type)a=R("1");else switch(a=t.arguments.map(e=>{if("number"!==e.code.type)throw new Error("The '*' operator only operates on integers and floats");return e.code.value}).reduce((e,u)=>e*u),typeof a){case"number":if(isNaN(a))throw new Error("The '*' operator only operates on integers and floats");a=R(a.toString());break;default:throw new Error("The '*' operator can only operate on numbers")}return{type:"PLACE_RESULT",payload:a}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),advanceHead:g.l("ADVANCE_HEAD")}},z=T.a({strict:!0,id:"multiplication",initial:"execute",states:{execute:{on:{STEP_QUANTA:{target:"done",actions:["exec","advanceHead","clearArguments"]}}},done:{type:"final"}}},G),q=e=>"string"==e.code.type||"number"==e.code.type||"address"==e.code.type||"fold"==e.code.type||"valueReference"==e.code.type||"blank"==e.code.type,W="value",$={actions:{resolveIdentifier:g.l(({stack:e},u)=>{const[t,...r]=e;return{type:"RESOLVE_IDENTIFIER",payload:{block:t.tape.blocks[t.head],frame:t},resolveValueRefs:!0}}),updateArgumentsWithCurrentBlock:g.l(({stack:e},u)=>{const[t,...r]=e;return{type:"APPEND_BLOCK_TO_ARGUMENTS",payload:t.tape.blocks[t.head]}}),updateArgumentsWithEvent:g.l((e,{payload:u})=>{const{stack:t}=e,[r,...a]=t;let n,o;return n=U(e,u),o=r.tape.commas[r.head]?r.arguments:[],o=o.concat({...n,name:void 0}),{type:"UPDATE_ARGUMENTS",payload:o}}),advanceHead:g.l("ADVANCE_HEAD")},guards:{isValueReference:({stack:e},u)=>{const[t,...r]=e;return"valueReference"==t.tape.blocks[t.head].code.type}}},J=T.a({strict:!0,id:"value",initial:"evaluate",states:{evaluate:{on:{STEP_QUANTA:[{target:"resolving",actions:"resolveIdentifier",cond:"isValueReference"},{target:"done",actions:["updateArgumentsWithCurrentBlock","advanceHead"]}]}},resolving:{on:{RESOLVE:{target:"done",actions:["updateArgumentsWithEvent","advanceHead"]}}},done:{type:"final"}}},$),Y=e=>"callIdentifier"==e.code.type&&"jump"==e.code.value.value&&!e.code.value.subPath,Z="jump",X={actions:{evaluate:g.l(({stack:e},u)=>{const[t,...r]=e;if(1!==t.arguments.length||"address"!=t.arguments[0].code.type)throw new Error("`jump!` has exactly one argument which must be an address");return{type:"RESOLVE_IDENTIFIER",payload:{block:t.arguments[0],frame:t}}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),jumpHead:g.l((e,{payload:u})=>{if(u.param)throw new Error("Cannot jump to a parameter address");return{type:"JUMP_HEAD",payload:u}})}},K=T.a({strict:!0,id:"jump",initial:"evaluate",states:{evaluate:{on:{STEP_QUANTA:{target:"jump",actions:["evaluate"]}}},jump:{on:{RESOLVE:{target:"done",actions:["jumpHead","clearArguments"]}}},done:{type:"final"}}},X),ee=e=>"callIdentifier"==e.code.type&&"ifjump"==e.code.value.value&&!e.code.value.subPath,ue="ifjump",te={actions:{testCondition:g.l(({stack:e},u)=>{const[t,...r]=e;if(2!==t.arguments.length||"address"!=t.arguments[1].code.type)throw new Error("`ifjump!` has exactly two arguments, the second of which must be an address");return{type:"RESOLVE_TRUTHINESS",payload:t.arguments[0]}}),evaluateAddress:g.l(({stack:e},u)=>{const[t,...r]=e;return{type:"RESOLVE_IDENTIFIER",payload:{block:t.arguments[1],frame:t}}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),jumpHead:g.l((e,{payload:u})=>{if(u.param)throw new Error("Cannot jump to a parameter address");return{type:"JUMP_HEAD",payload:u}}),advanceHead:g.l("ADVANCE_HEAD")},guards:{isTruthy:(e,{payload:u})=>u}},re=T.a({strict:!0,id:"ifjump",initial:"test",states:{test:{on:{STEP_QUANTA:{target:"evaluate",actions:["testCondition"]}}},evaluate:{on:{RESOLVE:[{target:"jump",actions:"evaluateAddress",cond:"isTruthy"},{target:"done",actions:["advanceHead","clearArguments"]}]}},jump:{on:{RESOLVE:{target:"done",actions:["jumpHead","clearArguments"]}}},done:{type:"final"}}},te),ae=e=>"callIdentifier"==e.code.type&&"copy"==e.code.value.value&&!e.code.value.subPath,ne="copy",oe={actions:{evaluate:g.l(({stack:e},u)=>{const[t,...r]=e;if(2!==t.arguments.length||"address"!=t.arguments[1].code.type)throw new Error("`copy!` has exactly two arguments, the second of which must be an address");return{type:"RESOLVE_IDENTIFIER",payload:{block:t.arguments[1],frame:t}}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),copy:g.l(({stack:e},{payload:u})=>{const[t,...r]=e;return{type:"PLACE_VALUE_AT_LOCATION",payload:{resolution:u,value:t.arguments[0]}}}),advanceHead:g.l("ADVANCE_HEAD")}},ce=T.a({strict:!0,id:"copy",initial:"evaluate",states:{evaluate:{on:{STEP_QUANTA:{target:"copy",actions:["evaluate"]}}},copy:{on:{RESOLVE:{target:"done",actions:["copy","clearArguments","advanceHead"]}}},done:{type:"final"}}},oe),se=e=>"callIdentifier"==e.code.type&&"set"==e.code.value.value&&!e.code.value.subPath,ie="set",le={actions:{evaluateSource:g.l(({stack:e},u)=>{const[t,...r]=e;if(2!==t.arguments.length||"address"!=t.arguments[0].code.type&&"address"!=t.arguments[1].code.type)throw new Error("`set!` has exactly two arguments, both of which must be addresses");return{type:"RESOLVE_IDENTIFIER",payload:{block:t.arguments[0],frame:t}}}),evaluateTarget:g.l(({stack:e},u)=>{const[t,...r]=e;return{type:"RESOLVE_IDENTIFIER",payload:{block:t.arguments[1],frame:t}}}),recordSource:g.b({sourceLocation:(e,{payload:u})=>u}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),copy:g.l((e,{payload:u})=>({type:"COPY_VALUE_AT_LOCATION_TO_LOCATION",payload:{source:e.sourceLocation,target:u}})),advanceHead:g.l("ADVANCE_HEAD"),reportToParentReadyToStep:g.l("REPORT_TO_PARENT_READY_TO_STEP")}},Ae=T.a({strict:!0,id:"set",initial:"evaluate_source",states:{evaluate_source:{on:{STEP_QUANTA:{target:"evaluate_target",actions:["evaluateSource"]}}},evaluate_target:{on:{RESOLVE:{actions:["recordSource","reportToParentReadyToStep"]},STEP_QUANTA:{target:"copy",actions:["evaluateTarget"]}}},copy:{on:{RESOLVE:{target:"done",actions:["copy","clearArguments","advanceHead"]}}},done:{type:"final"}}},le),pe=e=>"callIdentifier"==e.code.type&&"get"==e.code.value.value&&!e.code.value.subPath,de="get",Ee={actions:{evaluate:g.l(({stack:e},u)=>{const[t,...r]=e;if(1!==t.arguments.length||"address"!=t.arguments[0].code.type)throw new Error("`get!` has exactly one argument, which must be an address");return{type:"RESOLVE_IDENTIFIER",payload:{block:t.arguments[0],frame:t}}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),get:g.l((e,{payload:u})=>({type:"PLACE_RESULT",payload:U(e,u)})),advanceHead:g.l("ADVANCE_HEAD")}},Ce=T.a({strict:!0,id:"get",initial:"evaluate",states:{evaluate:{on:{STEP_QUANTA:{target:"get",actions:["evaluate"]}}},get:{on:{RESOLVE:{target:"done",actions:["get","clearArguments","advanceHead"]}}},done:{type:"final"}}},Ee),Fe=e=>"callIdentifier"==e.code.type&&"print"==e.code.value.value&&!e.code.value.subPath,fe="print",Be={actions:{exec:g.l(({stack:e},u)=>{const[t,...r]=e;return{type:"PRINT",payload:t.arguments}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),advanceHead:g.l("ADVANCE_HEAD")}},De=T.a({strict:!0,id:"print",initial:"execute",states:{execute:{on:{STEP_QUANTA:{target:"done",actions:["exec","advanceHead","clearArguments"]}}},done:{type:"final"}}},Be),me=e=>"callIdentifier"==e.code.type&&"return"==e.code.value.value&&!e.code.value.subPath,he="return",ye={actions:{evaluate:g.l(({stack:e},u)=>{if(e.length<=1)throw new Error("Cannot return from root tape");return{type:"PLACE_RETURN"}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]}))},guards:{}},ve=T.a({strict:!0,id:"return",initial:"evaluate",states:{evaluate:{on:{STEP_QUANTA:{target:"done",actions:["evaluate","clearArguments"]}}},done:{type:"final"}}},ye),ge=e=>"callIdentifier"==e.code.type&&"call"==e.code.value.value&&!e.code.value.subPath,Te="callCall",ke={actions:{evaluate:g.l(({stack:e},u)=>{const[t,...r]=e,a=[...t.arguments],n=a.pop();if(t.arguments.length<1||"fold"!=n.code.type)throw new Error("`call!` has no less than one argument, and its final argument must be a fold");return{type:"CALL_FOLD",fold:n,args:a}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]}))},guards:{}},_e=T.a({strict:!0,id:"callCall",initial:"evaluate",states:{evaluate:{on:{STEP_QUANTA:{target:"done",actions:["evaluate","clearArguments"]}}},done:{type:"final"}}},ke),be=e=>">"==e.code.value,xe="greaterThan",Re={actions:{exec:g.l(({stack:e},u)=>{const[t,...r]=e;let a,n=!0;if(t.arguments.length<2)throw new Error("Operator '>' takes at least 2 arguments");for(let e=0;e<t.arguments.length;e++){const u=t.arguments[e];let r=u.code.value;if("number"!==u.code.type&&"string"!==u.code.type)throw new Error("The '>' operator only operates on strings, integers and floats");if(void 0!==a&&a<=r){n=!1;break}a=r}return{type:"PLACE_RESULT",payload:R(n?"1":"0")}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),advanceHead:g.l("ADVANCE_HEAD")}},Se=T.a({strict:!0,id:"greaterThan",initial:"execute",states:{execute:{on:{STEP_QUANTA:{target:"done",actions:["exec","advanceHead","clearArguments"]}}},done:{type:"final"}}},Re),Ne=e=>"<"==e.code.value,Ie="lessThan",we={actions:{exec:g.l(({stack:e},u)=>{const[t,...r]=e;let a,n=!0;if(t.arguments.length<2)throw new Error("Operator '<' takes at least 2 arguments");for(let e=0;e<t.arguments.length;e++){const u=t.arguments[e];let r=u.code.value;if("number"!==u.code.type&&"string"!==u.code.type)throw new Error("The '<' operator only operates on strings, integers and floats");if(void 0!==a&&a>=r){n=!1;break}a=r}return{type:"PLACE_RESULT",payload:R(n?"1":"0")}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),advanceHead:g.l("ADVANCE_HEAD")}},Pe=T.a({strict:!0,id:"lessThan",initial:"execute",states:{execute:{on:{STEP_QUANTA:{target:"done",actions:["exec","advanceHead","clearArguments"]}}},done:{type:"final"}}},we),Ue=e=>"=="==e.code.value,Oe="equalTo",je={actions:{exec:g.l(({stack:e},u)=>{const[t,...r]=e;let a,n=!0;if(t.arguments.length<2)throw new Error("Operator '==' takes at least 2 arguments");for(let e=0;e<t.arguments.length;e++){const u=t.arguments[e];let r=u.code.value;if("number"!==u.code.type&&"string"!==u.code.type)throw new Error("The '==' operator only operates on strings, integers and floats");if(void 0!==a&&a!==r){n=!1;break}a=r}return{type:"PLACE_RESULT",payload:R(n?"1":"0")}}),clearArguments:g.l((e,u)=>({type:"UPDATE_ARGUMENTS",payload:[]})),advanceHead:g.l("ADVANCE_HEAD")}},Le=T.a({strict:!0,id:"equalTo",initial:"execute",states:{execute:{on:{STEP_QUANTA:{target:"done",actions:["exec","advanceHead","clearArguments"]}}},done:{type:"final"}}},je),He=e=>"inlineFold"==e.code.type,Ve="inlineFold",Qe={actions:{evaluate:g.l(({stack:e},u)=>{const[t,...r]=e;return{type:"CALL_FOLD",fold:t.tape.blocks[t.head],args:[]}})},guards:{}},Me=T.a({strict:!0,id:"inlineFold",initial:"evaluate",states:{evaluate:{on:{STEP_QUANTA:{target:"done",actions:["evaluate"]}}},done:{type:"final"}}},Qe),Ge={print:e=>console.log(e.payload.map(S).join(""))},ze=[a,n,o,c,s,i,l,A,p,d,E,C,F,f,B],qe={strict:!0,id:"ConcreteStepInterpreter",initial:"empty",states:{empty:{on:{INPUT:{target:"unparsed",actions:"input"},STEP_QUANTA:"halted"}},unparsed:{always:{target:"uninitialized",actions:"parse"}},uninitialized:{always:{target:"ready",actions:"initialize"}},ready:{entry:["reportToParentReadyToStep"],on:{STEP_QUANTA:"running"}},running:{initial:"checkPastEdge",states:{checkPastEdge:{always:[{target:"#ConcreteStepInterpreter.halted",cond:"headPastEdge"},{target:"read"}]},read:{entry:["reportToParentReadyToStep"],on:{STEP_QUANTA:{target:"execute",actions:["identify","incrementStep"]}}},execute:{entry:["reportToParentReadyToStep"],invoke:{id:"executor",src:"execute",data:(e,u)=>e,onError:{target:"#ConcreteStepInterpreter.error"},onDone:[{cond:"shouldImplicitReturn",target:"return"},{cond:"shouldPop",target:"pop",actions:["incrementStep"]},{target:"checkPastEdge",actions:"incrementStep"}]},on:{STEP_QUANTA:{actions:"forwardToExecutor",cond:"executorNotDone"},REPORT_TO_PARENT_READY_TO_STEP:{actions:["reportToParentReadyToStep"]},PLACE_RESULT:{actions:["exec_placeResult","incrementStep"]},PLACE_RETURN:{target:"return"},PLACE_VALUE_AT_LOCATION:{actions:["exec_placeValueAtLocation","incrementStep"]},COPY_VALUE_AT_LOCATION_TO_LOCATION:{actions:["exec_copyValueAtLocationToLocation","incrementStep"]},APPEND_BLOCK_TO_ARGUMENTS:{actions:["appendBlockToArguments","incrementStep"]},UPDATE_ARGUMENTS:{actions:["exec_updateArguments","incrementStep"]},ADVANCE_HEAD:{actions:["exec_advanceHead","incrementStep"]},JUMP_HEAD:{actions:["exec_jumpHead","incrementStep"]},PRINT:{actions:["exec_print","incrementStep"]},RESOLVE_IDENTIFIER:{actions:["exec_request_resolveIdentifier","incrementStep"]},RESOLVE_TRUTHINESS:{actions:["exec_request_resolveTruthiness","incrementStep"]},CALL_FOLD:{actions:["exec_callFold","incrementStep"]}}},return:{entry:["reportToParentReadyToStep"],on:{STEP_QUANTA:[{cond:"isFrameInline",actions:["placeInlineReturnValue","incrementStep"],target:"pop"},{target:"pop",actions:["placeCallReturnValue","incrementStep"]}]}},pop:{entry:["reportToParentReadyToStep"],on:{STEP_QUANTA:{target:"checkPastEdge",actions:["popFrame","incrementStep"]}}}}},error:{type:"final",entry:"err"},halted:{type:"final",entry:"haltAndStoreResult",data:e=>e}}};function We(e,u,t,r,a){const n=t.code.tape.blocks,o={},c=[],s={};for(let r=0;r<n.length;r++){const a={...n[r],idActual:u++};switch(a.code.type){case"fold":let u={...a.references};for(const r in u){const a=u[r];if("upvalue"!=a.type||"local"!=t.references[r].type&&"param"!=t.references[r].type)"upvalue"==a.type&&"upvalue"==t.references[r].type&&(u[r]={...a,idActivation:t.references[r].idActivation});else{if(a.idActivation)throw new Error("Attempted to close already closed reference");u[r]={...a,idActivation:e},o[r]=!0}}c.push({...a,references:u});break;case"address":const r=t.references[a.code.value.value];"local"!=r.type&&"param"!=r.type||a.idActivation?"upvalue"!=r.type||a.idActivation?c.push(a):(c.push({...a,idActivation:r.idActivation}),o[r.identifier]=!0):(c.push({...a,idActivation:e}),o[r.identifier]=!0);break;default:c.push(a)}}for(const e in t.references)o[e]?s[e]={...t.references[e],captured:!0}:s[e]=t.references[e];return{nextIdActualBlock:u,idActivation:e,head:0,halted:!1,tape:{...t.code.tape,blocks:c},references:s,actualParameters:a,arguments:[],result:null,currentBlockType:null,isInline:"inlineFold"==t.code.type}}const $e={actions:{...{input:g.b({source:(e,{payload:u})=>u}),parse:g.b({root:({source:e})=>{return{type:"root",code:{type:"tape",tape:(u=e,"string"!=typeof u&&(u=u.toString()),_(u))}};var u}}),initialize:g.b((e,u)=>{const{stack:t,root:r}=e,{references:a,fold:n}=function e(u,t=2){const r=u.code.parameters&&u.code.parameters.blocks,a=u.code.tape.blocks,n=[],o={};if(r)for(let e=0;e<r.length;e++){const u=r[e];if(u.name)o[u.name]={type:"param",identifier:u.name,index:e};else{if("valueReference"!=u.code.type)throw new Error("All parameters must be identifiers or named blocks");if(u.code.value.subPath)throw new Error("Sub paths on parameters not allowed");o[u.code.value.value]={type:"param",identifier:u.code.value.value,index:e}}}for(let e=0;e<a.length;e++){const u=a[e];u.name&&(o[u.name]={type:"local",identifier:u.name,index:e})}for(let u=0;u<a.length;u++){const r=a[u];switch(r.code.type){case"fold":const u=e(r,t);t=u.idNext;for(let e in u.references){const t=u.references[e];"upvalue"!=t.type||o[e]||(o[e]=t)}n.push(u.fold);break;case"valueReference":case"callIdentifier":case"address":if(r.code.value.subPath)throw new Error("Sub paths on identifiers not allowed");o[r.code.value.value]||(o[r.code.value.value]={type:"upvalue",identifier:r.code.value.value});default:n.push(r)}}return{fold:{...u,references:o,code:{...u.code,tape:{...u.code.tape,blocks:n}}},references:o,idNext:t}}(r);for(const e in a)a[e].type;const o=We(e.idNextActivation,e.nextIdActualBlock,n);return{...e,stack:[o,...t],idNextActivation:e.idNextActivation+1,nextIdActualBlock:o.nextIdActualBlock}}),identify:g.b({stack:({stack:e,executors:u})=>{const[t,...r]=e,a=t.tape.blocks[t.head],n=(t.currentBlockType,u.find(e=>e.typeGuard(a)));if(!n)throw new Error("Can't discern type of block: "+JSON.stringify(a));return[{...t,currentBlockType:n.typeName},...r]}}),forwardToExecutor:g.k((e,u)=>u.type,{to:"executor"}),appendBlockToArguments:g.b({stack:({stack:e},{payload:u})=>{const[t,...r]=e;let a;return a=t.tape.commas[t.head]?t.arguments:[],a=a.concat(u),[{...t,arguments:a},...r]}}),exec_updateArguments:g.b({stack:({stack:e},{payload:u})=>{const[t,...r]=e;return[{...t,arguments:u},...r]}}),exec_placeResult:g.b((e,u)=>{const[t,...r]=e.stack,a=t.head+1,n={...u.payload,idActual:e.nextIdActualBlock};return{...e,stack:[{...t,tape:{...t.tape,blocks:[...t.tape.blocks.slice(0,a),n,...t.tape.blocks.slice(a+1)]}},...r],nextIdActualBlock:e.nextIdActualBlock+1}}),exec_callFold:g.b((e,u)=>{const{fold:t,args:r}=u,{stack:a}=e;return{...e,stack:[We(e.idNextActivation,e.nextIdActualBlock,t,t.parameters,r),...a],idNextActivation:e.idNextActivation+1}}),exec_placeValueAtLocation:g.b((e,{payload:u})=>{const{resolution:t,value:r}=u;return O(e,t,r)}),exec_copyValueAtLocationToLocation:g.b((e,{payload:u})=>{const{source:t,target:r}=u,a=U(e,t);return O(e,r,a)}),exec_advanceHead:g.b({stack:({stack:e})=>{const[u,...t]=e;return[{...u,head:u.head+1,currentBlockType:null},...t]}}),exec_jumpHead:g.b({stack:({stack:e},u)=>{const[t,...r]=e,a=u.payload;let n;if("stack"!==a.type)throw new Error("Cannot jump anywhere but the current frame");if(0!==a.indexFrame)throw new Error("Cannot jump anywhere but the curent frame");if(n=t.references[a.identifier],"param"==n.type)throw new Error(`Cannot jump location, @${a.identifier} is a parameter`);if(n.index<0||n.index>t.tape.blocks.length)throw new Error(`Cannot jump to index ${n.index} outside the current tape`);return[{...t,head:n.index},...r]}}),exec_request_resolveTruthiness:g.k(({stack:e},{payload:u})=>({type:"RESOLVE",payload:!("number"==u.code.type&&0===u.code.value)}),{to:"executor"}),exec_request_resolveIdentifier:g.k((e,{payload:u,resolveValueRefs:t})=>{const{stack:r,closedBlocksByIdentifierByActivationId:a}=e;let n,o=u.frame;const c=(e,u)=>{let t;const n=e=>{const u=r.findIndex(u=>u.idActivation===e);if(-1==u)throw new Error("Could not find existing frame with ID "+e);return u};if(u.idActivation){t=a[u.idActivation]?{type:"closed",identifier:u.code.value.value,idActivation:u.idActivation}:{type:"stack",identifier:u.code.value.value,indexFrame:n(u.idActivation)}}else{let r=e.references[u.code.value.value];if(!r)throw new Error("Could not find reference for "+u.code.value.value);if("local"==r.type||"param"==r.type)t={type:"stack",identifier:u.code.value.value,indexFrame:n(e.idActivation)};else{if("upvalue"!=r.type)throw new Error("Unexpected reference type "+r.type);if(!r.idActivation)throw new Error("Upvalue resolved without activation for identifier "+u.code.value.value);t=a[r.idActivation]?{type:"closed",identifier:u.code.value.value,idActivation:r.idActivation}:{type:"stack",identifier:u.code.value.value,indexFrame:n(r.idActivation)}}}if(!t)throw new Error("Unable to resolve identifier "+u.code.value.value);return t};if(u.block.code.subPath)throw new Error("Identifier paths not supported");for(n=c(o,u.block);t;){const u=U(e,n);if("valueReference"!==u.code.type)break;n=c(n.frame,u)}return{type:"RESOLVE",payload:n}},{to:"executor"}),exec_print:(e,u)=>e.sideEffects.print(u),popFrame:g.b((e,u)=>{const{stack:t,closedBlocksByIdentifierByActivationId:r}=e,[a,n,...o]=t;let c=a.references;const s={};for(const e in c){const u=c[e];if(u.captured){let t;t="param"==u.type?a.actualParameters[u.index]:a.tape.blocks[u.index],s[e]=t}}return{...e,stack:[{...n,head:n.head+1},...o],closedBlocksByIdentifierByActivationId:{...r,[a.idActivation]:s}}}),placeCallReturnValue:g.b((e,u)=>{const[t,r,...a]=e.stack,n=r.head+1;let o=t.arguments[t.arguments.length-1],c=r.tape.blocks;return o={...o,idActual:e.nextIdActualBlock},o&&"blank"!==o.code.type&&(c=[...c.slice(0,n),o,...c.slice(n+1)]),{...e,stack:[t,{...r,tape:{...r.tape,blocks:c}},...a],nextIdActualBlock:e.nextIdActualBlock+1}}),placeInlineReturnValue:g.b((e,u)=>{const[t,r,...a]=e.stack,n=t.arguments[t.arguments.length-1];let o;if(!n||"blank"===n.code.type)throw new Error("Inline fold did not return a value");return o=r.tape.commas[r.head]?r.arguments:[],o=o.concat(n),{...e,stack:[t,{...r,arguments:o},...a]}}),incrementStep:g.b({step:({step:e})=>e+1}),err:g.b({error:(e,u)=>u}),haltAndStoreResult:g.b((e,u)=>{const t=e.stack[0];return{halted:!0,result:t.arguments[t.arguments.length-1]}}),reportToParentReadyToStep:g.l((e,u)=>({type:"INTERPRETER_UPDATE",payload:e}))}},guards:{headPastEdge:({stack:e})=>{const[u,...t]=e;return u.head>=u.tape.blocks.length},shouldImplicitReturn:({stack:e})=>{const[u,...t]=e,r=u.arguments[u.arguments.length-1];return u.head==u.tape.blocks.length&&r&&"blank"!==r.code.type&&e.length>1},isFrameInline:({stack:e})=>{const[u,...t]=e;return u.isInline},shouldPop:({stack:e})=>{const[u,...t]=e;return u.head==u.tape.blocks.length&&e.length>1},executorNotDone:(e,u,t)=>!t.state.children.executor.state.done},activities:{},services:{execute:({stack:e,executors:u})=>{const[t,...r]=e,a=(t.tape.blocks[t.head],t.currentBlockType);return u.find(e=>e.typeName==a).service}},delays:{}},Je={source:null,root:null,stack:[],executors:ze,sideEffects:Ge,halted:!1,step:0,idNextActivation:1,nextIdActualBlock:1,closedBlocksByIdentifierByActivationId:{}};const Ye={strict:!0,id:"ConcreteRunnableInterpreter",type:"parallel",states:{mode:{initial:"pause",states:{pause:{entry:["maybeSendUpdate"]},run:{entry:["maybeSendUpdate"]},debug:{entry:["maybeSendUpdate"]},done:{entry:["maybeSendUpdate"]}},on:{PAUSE:".pause",DEBUG:".debug",DONE:".done",RUN:[{cond:"isNotRunning",actions:["sendStepQuantaToInterpreter"],target:".run"},{target:".run"}]}},runtime:{initial:"running",states:{running:{invoke:{src:"stepInterpreter",id:"stepInterpreter",onDone:{target:"done",actions:["reportHalted","doneRunner"]},onError:{target:"done",actions:["reportError","doneRunner"]}},on:{INPUT:{actions:["forwardToStepper"]},STEP_QUANTA:{actions:["forwardToStepper"]},INTERPRETER_UPDATE:[{cond:"isAtMaxSteps",actions:["reportMaxSteps","pauseRunner","maybeSendUpdate"],target:"done"},{cond:"isRunningAndNotHalted",actions:["sendStepQuantaToInterpreter"]},{actions:["maybeSendUpdate"]}]}},done:{on:{STEP_QUANTA:{actions:[()=>console.log("Step Quanta sent when interpreter done")]},INPUT:{actions:[()=>console.log("INPUT sent when interpreter done")]}}}}}},on:{MAYBE_SEND_UPDATE:[{cond:"shouldUpdateParent",actions:["updateParent"]}]}},Ze={actions:{forwardToStepper:g.g("stepInterpreter"),sendStepQuantaToInterpreter:g.k("STEP_QUANTA",{to:"stepInterpreter"}),reportError:(e,u)=>{console.error("Runner caught stepper error:",u.data)},reportHalted:(e,u)=>{},reportMaxSteps:(e,u)=>{console.error("Max steps reached: ",1e3)},doneRunner:g.k((e,u)=>({...u,type:"DONE"})),pauseRunner:g.k("PAUSE"),maybeSendUpdate:g.k("MAYBE_SEND_UPDATE"),updateParent:g.m()},guards:{isAtMaxSteps:(e,u)=>u.payload.step>=1e3,isRunningAndNotHalted:(e,u,t)=>"run"==t.state.value.mode&&"halted"!==t.state.children.stepInterpreter.state.value,isNotRunning:(e,u,t)=>"run"!=t.state.value.mode,shouldUpdateParent:(e,u)=>e.shouldUpdateParent},services:{stepInterpreter:()=>T.a(qe).withConfig($e).withContext(Je)}},Xe={shouldUpdateParent:!1},Ke={id:"concreteRunnerMachine",strict:!0,context:{},initial:"uninitialized",states:{uninitialized:{entry:["initialize"],always:"ready"},ready:{on:{RUN_CODE:{target:"loadInputForRun",actions:["initInterpreter"]},STEP_CODE:{target:"loadInputForStep",actions:["initInterpreter"]},STEP_QUANTA:{actions:["stepQuanta"]},STEP_QUANTA_TEN:{target:"sendingStepQuantas"}}},loadInputForRun:{entry:["loadInput"],always:"run"},loadInputForStep:{entry:["loadInput"],always:"ready"},run:{entry:["run"],always:"ready"},sendingStepQuantas:{invoke:{src:"sendStepQuantas",id:"sendStepQuantas",onDone:{target:"ready"},onError:{}},on:{STEP_QUANTA:{actions:["stepQuanta"]},DONE:{target:"ready"}}}},on:{PRINT_SIDE_EFFECT:{actions:["bubble"]},RUN_RESULT:{actions:["bubble"]},RUN_ERROR:{actions:["bubble"]},"xstate.update":{actions:[m.r((e,u)=>({type:"STEPPER_UPDATE",payload:e.refInterpreter&&e.refInterpreter.children.get("stepInterpreter")&&e.refInterpreter.children.get("stepInterpreter")._state.context})),(e,u,t)=>{console.log("Update:",u,t,e),e.refInterpreter?e.refInterpreter.children.get("stepInterpreter")?console.log("Update: stepper context: ",e.refInterpreter.children.get("stepInterpreter")._state.context):console.log("No stepper child of runnable interpreter"):console.log("Update: No interpreter")},"sendInterpreterUpdateToParent"]}}},eu={actions:{initialize:y.assign((e,u)=>{}),initInterpreter:y.assign((e,u)=>{let t;e.refInterpreter&&console.warn("CONCRETE: Existing interpreter will not be cleaned up"),e.refPrinter=D.c(e=>{t=u=>{const t=u.payload.map(N).join("");console.log("MY EXEC_PRINT GOT:",t),e({type:"PRINT_SIDE_EFFECT",payload:{value:t}})}});const r={...Ze,actions:{...Ze.actions,reportError:m.r((e,u)=>({type:"RUN_ERROR",payload:{value:u.data}})),reportHalted:m.r((e,u)=>({type:"RUN_RESULT",payload:{value:u.data.result,pretty:u.data.result&&S(u.data.result)}})),reportMaxSteps:(e,u)=>{console.error("Max steps reached: ",TRAP_INFINITE_MAX_STEPS)}},services:{...Ze.services,stepInterpreter:()=>{const e={...$e,actions:{...$e.actions}},u={...Je,sideEffects:{...Je.sideEffects,print:e=>t(e)}};return h.a(qe).withConfig(e).withContext(u)}}},a={...Xe,shouldUpdateParent:!0};e.refInterpreter=D.c(h.a(Ye).withConfig(r).withContext(a))}),loadInput:m.q((e,u)=>(console.log("LOADING",u.payload),{type:"INPUT",payload:u.payload}),{to:e=>e.refInterpreter}),run:m.q((e,u)=>({type:"RUN"}),{to:e=>e.refInterpreter}),stepQuanta:m.q((e,u)=>({type:"STEP_QUANTA"}),{to:e=>e.refInterpreter}),sendInterpreterUpdateToParent:m.r((e,u)=>e.refInterpreter&&e.refInterpreter.children.get("stepInterpreter")?{type:"INTERPRETER_UPDATE",payload:e.refInterpreter.children.get("stepInterpreter")._state.context}:{type:"INTERPRETER_UPDATE",payload:null}),bubble:m.r((e,u)=>u)},activities:{},services:{sendStepQuantas:(e,u)=>e=>{for(var u=0;u<10;u++)e({type:"STEP_QUANTA",test:1});e({type:"DONE"})}}};t("bU/s");v.selection.prototype.appendTemplateClone=function(e){return this.select((function(){return this.appendChild(e.node().content.cloneNode(!0).firstElementChild)}))};const uu="solarized_light";var tu;tu=uu,ace.config.setModuleUrl("ace/theme/"+tu,t("w6Cq")(`./theme-${tu}.js`));const ru={id:"UIMachine",strict:!1,context:{},type:"parallel",states:{viewingSection:{initial:"editor",states:{editor:{},out:{on:{RUN:{actions:["runConcrete"]},RESET:{actions:["clearOutputArea"]}}},stepper:{on:{STEP:{actions:["stepInterpreter"]},RESTART:{actions:["resetConcrete"]}}}}},controls:{initial:"uninitialized",states:{uninitialized:{entry:["initializeControls"],always:"initialized"},initialized:{on:{SHOW_AREA:{actions:["showArea"]},RUN_CONCRETE:{actions:["runConcrete"]},STEP_CONCRETE:{actions:["stepConcrete"]},STEP_ONCE_CONCRETE:{actions:["stepOnceConcrete"]},STEP_TEN_CONCRETE:{actions:["stepTenConcrete"]},FOCUS_EDITOR:{actions:["focusEditor"]},INTERPRETER_UPDATE:{actions:["updateStepper"]}}}}},output:{initial:"empty",states:{empty:{on:{PRINT_SIDE_EFFECT:{target:"nonEmpty",actions:["clearOutputArea","printToOutputArea"]}}},nonEmpty:{on:{PRINT_SIDE_EFFECT:{target:"nonEmpty",actions:["printToOutputArea"]},CLEAR_OUTPUT:{target:"empty",actions:["setOutputAreaToNoOutput"]}}}},on:{RUN_RESULT:{actions:["placeResultInResultArea"]},RUN_ERROR:{actions:["placeErrorInResultArea"]}}}}},au={actions:{initializeControls:y.assign(e=>{e.selector={},e.selector.body="body",e.selector.outputContainer="[data-run-log]",e.selector.resultContainer="[data-run-result]",e.selector.stepperContent="[data-stepper-stack]",e.selector.stepperFrameTemplate="[data-template-stepper-frame]",e.selector.stepperFrameTemplateTapeBlock="[data-template-stepper-frame-tape-block]",e.selector.stepperStatus="[data-stepper-status]",e.selector.stepperStep="[data-stepper-step]",e.selection={},Object.entries(e.selector).forEach(([u,t])=>e.selection[u]=v.select(t)),e.selector.viewControl="a[data-show-view]",e.selector.runControl="a[data-run]",e.selector.stepControl="a[data-step]",e.selector.stepOnceControl="a[data-step-once]",e.selector.stepTenControl="a[data-step-ten]",e.selector.clearControl="a[data-clear]",e.selection.viewControls=e.selection.body.selectAll(e.selector.viewControl),e.selection.runControls=e.selection.body.selectAll(e.selector.runControl),e.selection.stepControls=e.selection.body.selectAll(e.selector.stepControl),e.selection.stepOnceControls=e.selection.body.selectAll(e.selector.stepOnceControl),e.selection.stepTenControls=e.selection.body.selectAll(e.selector.stepTenControl),e.selection.clearControls=e.selection.body.selectAll(e.selector.clearControl),e.selector.stepperFrame="[data-stepper-frame]",e.selector.stepperFrameHead="[data-stepper-frame-head]",e.selector.stepperFrameDepth="[data-stepper-frame-depth]",e.selector.stepperFrameParametersTape="[data-stepper-frame-parameters-tape]",e.selector.stepperFrameRunningTape="[data-stepper-frame-running-tape]",e.selector.stepperFrameArguments="[data-stepper-frame-arguments]",e.selector.stepperFrameTapeComma="[data-stepper-frame-tape-comma]",e.selector.stepperFrameTapeBlock="[data-stepper-frame-tape-block]",e.selector.stepperFrameTapeBlockName="[data-stepper-frame-tape-block-name]",e.selector.stepperFrameTapeBlockValue="[data-stepper-frame-tape-block-value]",e.selection.allControls=e.selection.body.selectAll([e.selector.viewControl,e.selector.runControl,e.selector.stepControl,e.selector.stepOnceControl,e.selector.stepTenControl,e.selector.clearControl].join(",")),e.actorControlsClickListener=D.c(u=>{e.selection.allControls.on("click",(function(e){e.preventDefault(),this.dataset.showView&&u({type:"SHOW_AREA",payload:{show:this.dataset.showView}}),"editor"==this.dataset.showView&&u({type:"FOCUS_EDITOR"}),"run"in this.dataset&&u({type:"RUN_CONCRETE"}),"step"in this.dataset&&u({type:"STEP_CONCRETE"}),"stepOnce"in this.dataset&&u({type:"STEP_ONCE_CONCRETE"}),"stepTen"in this.dataset&&u({type:"STEP_TEN_CONCRETE"}),"clear"in this.dataset&&u({type:"CLEAR_OUTPUT"})}))}),e.aceEditor=ace.edit("main-ace-editor",{value:"4, 5, (a, b)[ a, a * _, b + _ ] call!",theme:"ace/theme/"+uu,mode:"ace/mode/text"}),e.aceEditor.focus(),e.aceEditor.moveCursorTo(999,999),e.refConcreteRunner=D.c(h.a(Ke,eu),{sync:!0})}),showArea:(e,u)=>{e.selection.body.classed("is-viewing-editor","editor"===u.payload.show),e.selection.body.classed("is-viewing-runner","runner"===u.payload.show),e.selection.body.classed("is-viewing-stepper","stepper"===u.payload.show)},runConcrete:m.q((e,u)=>({type:"RUN_CODE",payload:e.aceEditor.getValue()}),{to:e=>e.refConcreteRunner}),stepConcrete:m.q((e,u)=>({type:"STEP_CODE",payload:e.aceEditor.getValue()}),{to:e=>e.refConcreteRunner}),stepOnceConcrete:m.q((e,u)=>({type:"STEP_QUANTA",payload:e.aceEditor.getValue()}),{to:e=>e.refConcreteRunner}),stepTenConcrete:m.q((e,u)=>({type:"STEP_QUANTA_TEN",payload:e.aceEditor.getValue()}),{to:e=>e.refConcreteRunner}),clearOutputArea:(e,u)=>{e.selection.outputContainer.text("")},setOutputAreaToNoOutput:(e,u)=>{e.selection.outputContainer.text("No output")},printToOutputArea:(e,u)=>{const t=e.selection.outputContainer.node(),r=t.scrollHeight-(t.scrollTop+t.clientHeight)<200;e.selection.outputContainer.text(e.selection.outputContainer.text()+"\n"+u.payload.value),r&&(t.scrollTop=t.scrollHeight)},placeResultInResultArea:(e,u)=>{e.selection.resultContainer.text(void 0!==u.payload.pretty?u.payload.pretty:"<none>")},placeErrorInResultArea:(e,u)=>{e.selection.resultContainer.text("Error: "+u.payload.value)},focusEditor:(e,u)=>e.aceEditor.focus(),updateStepper:(e,u)=>{if(!u.payload)return console.error("Tried to update stepper UI but it's not there"),void e.selection.stepperStatus.text("Halted").classed("is-status-halted",!0);e.selection.stepperStatus.text("Running").classed("is-status-halted",!1),e.selection.stepperStep.text(u.payload.step),e.selection.stepperContent.selectAll(e.selector.stepperFrame).data(u.payload.stack,e=>e.idActivation).join(u=>u.appendTemplateClone(e.selection.stepperFrameTemplate),e=>e,e=>e.remove()).classed("is-stepper-frame-active",(e,u)=>0==u).call(u=>u.call(u=>u.select(e.selector.stepperFrameDepth).text((e,u)=>u)).call(u=>u.select(e.selector.stepperFrameHead).text(e=>e.head)).call(u=>u.select(e.selector.stepperFrameParametersTape).selectAll(e.selector.stepperFrameTapeBlock).data(e=>Object.entries(e.references).filter(([e,u])=>"param"==u.type).map(([u,t],r)=>({block:e.actualParameters[t.index],name:u,comma:0!==r})),e=>e.name).join(u=>u.appendTemplateClone(e.selection.stepperFrameTemplateTapeBlock),e=>e,e=>e.remove()).call(u=>u.select(e.selector.stepperFrameTapeBlockName).text(e=>e.name+":")).call(u=>u.select(e.selector.stepperFrameTapeBlockValue).text(e=>S(e.block,{name:!1})))).call(u=>u.select(e.selector.stepperFrameTapeComma).text((e,u)=>e.comma?", ":"")).call(u=>u.select(e.selector.stepperFrameRunningTape).selectAll(e.selector.stepperFrameTapeBlock).data(e=>e.tape.blocks.map((u,t)=>({comma:e.tape.commas[t],block:u,atHead:e.head===t})),e=>e.block.idActual).join(u=>u.appendTemplateClone(e.selection.stepperFrameTemplateTapeBlock),e=>e,e=>e.remove()).classed("is-stepper-frame-tape-block-at-head",e=>e.atHead).call(u=>u.select(e.selector.stepperFrameTapeComma).text(e=>e.comma?",":"")).call(u=>u.select(e.selector.stepperFrameTapeBlockValue).text(e=>S(e.block)))).call(u=>u.select(e.selector.stepperFrameArguments).selectAll(e.selector.stepperFrameTapeBlock).data(e=>e.arguments.map((e,u)=>({comma:0!==u,block:e})),e=>e.block.idActual).join(u=>u.appendTemplateClone(e.selection.stepperFrameTemplateTapeBlock),e=>e,e=>e.remove()).call(u=>u.select(e.selector.stepperFrameTapeComma).text(e=>e.comma?", ":" ")).call(u=>u.select(e.selector.stepperFrameTapeBlockValue).text(e=>S(e.block)))))}},guards:{},activities:{},services:{}},nu=D.b(h.a(ru,au));nu.onTransition((e,u)=>{console.log("UI Machine transitioned: ",e.value,u)}),nu.start()},w6Cq:function(e,u,t){var r={"./theme-ambiance.js":"qxIs","./theme-chaos.js":"hsfQ","./theme-chrome.js":"piRb","./theme-clouds.js":"tBeY","./theme-clouds_midnight.js":"H1qW","./theme-cobalt.js":"ZJ2f","./theme-crimson_editor.js":"iIk/","./theme-dawn.js":"UqDz","./theme-dracula.js":"Xgh0","./theme-dreamweaver.js":"49mq","./theme-eclipse.js":"gpuJ","./theme-github.js":"GTtX","./theme-gob.js":"f9aN","./theme-gruvbox.js":"ZvBk","./theme-idle_fingers.js":"kwTB","./theme-iplastic.js":"sS4s","./theme-katzenmilch.js":"iMG9","./theme-kr_theme.js":"Kx6e","./theme-kuroir.js":"SLIA","./theme-merbivore.js":"WL/I","./theme-merbivore_soft.js":"614k","./theme-mono_industrial.js":"Wo0X","./theme-monokai.js":"Quqz","./theme-nord_dark.js":"ud1w","./theme-pastel_on_dark.js":"22yp","./theme-solarized_dark.js":"zWEz","./theme-solarized_light.js":"5BDQ","./theme-sqlserver.js":"+077","./theme-terminal.js":"F+Gd","./theme-textmate.js":"vgQK","./theme-tomorrow.js":"7iDM","./theme-tomorrow_night.js":"Nu51","./theme-tomorrow_night_blue.js":"tTzs","./theme-tomorrow_night_bright.js":"hhun","./theme-tomorrow_night_eighties.js":"CSio","./theme-twilight.js":"duWt","./theme-vibrant_ink.js":"D4gj","./theme-xcode.js":"o5wD"};function a(e){var u=n(e);return t(u)}function n(e){if(!t.o(r,e)){var u=new Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id="w6Cq"}},[[0,1,2]]]);
//# sourceMappingURL=main.84865962c40d487484bd.js.map